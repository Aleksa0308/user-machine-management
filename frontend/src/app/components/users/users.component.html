<section>
  <div style="display: flex; align-items: center; justify-content: space-between; width: 100%">
    <h4>Users</h4>
    <button *ngIf="canCreate" pButton type="button" icon="pi pi-plus" (click)="navigateToCreateUser()" label="Create user"></button>
  </div>
  <p-table [value]="users" [tableStyle]="{ 'min-width': '50rem' }">
    <ng-template pTemplate="header">
      <tr>
        <th>Id</th>
        <th>First name</th>
        <th>Last name</th>
        <th>Email</th>
        <th>Permissions</th>
        <th>Actions</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-user>
      <tr>
        <td>{{ user.userId }}</td>
        <td>{{ user.firstname }}</td>
        <td>{{ user.lastname }}</td>
        <td>{{ user.email }}</td>
        <td>
          <!-- Loop through the permissions and display them -->
          <ng-container *ngFor="let permission of user.permissions">
            - {{ permission.name }}<br>
          </ng-container>
        </td>
        <td style="display: flex; gap: 4px;">
          <button *ngIf="canEdit" pButton type="button" (click)="navigateToUpdateUser(user.userId)" icon="pi pi-pencil"></button>
          <button *ngIf="canDelete" pButton type="button" (click)="deleteUser(user.userId)" icon="pi pi-trash" class="p-button-danger"></button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</section>
<!--if user has permissions display message-->

